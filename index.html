<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Tap Game Pro</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #0b0f1c;
      font-family: Arial;
      color: white;
      text-align: center;
      overflow: hidden;
    }

    .coin {
      width: 180px;
      height: 180px;
      margin: 80px auto;
      border-radius: 50%;
      background: radial-gradient(circle, #ffd700, #ffae00);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 40px;
      font-weight: 700;
      box-shadow: 0px 0px 40px gold;
      transition: transform 0.1s;
      cursor: pointer;
      user-select: none;
    }

    .coin:active {
      transform: scale(0.85);
    }

    .score-box {
      margin-top: 20px;
      font-size: 24px;
    }

    .energy {
      color: #00ffcc;
      font-size: 18px;
    }

    .boost {
      margin-top: 20px;
      padding: 12px 25px;
      border-radius: 12px;
      background: #0099ff;
      border: none;
      font-size: 20px;
      color: white;
      cursor: pointer;
    }

    .popup {
      position: absolute;
      font-size: 22px;
      font-weight: bold;
      pointer-events: none;
      color: #00ff3a;
      opacity: 1;
      animation: fly 0.8s ease-out forwards;
    }

    @keyframes fly {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-50px); opacity: 0; }
    }

  </style>
</head>

<body>

  <h1>⚡ Tap Game Pro</h1>

  <div class="score-box">Coins: <span id="coins">0</span></div>
  <div class="energy">Energy: <span id="energy">200</span> / 200</div>

  <div class="coin" id="tap">TAP</div>

  <button class="boost" id="boostBtn">⚡ Boost x2 (30s)</button>

  <script>
    const tg = window.Telegram?.WebApp;
    tg?.expand();

    // LOAD FROM STORAGE
    let coins = parseInt(localStorage.getItem("coins") || "0");
    let energy = parseInt(localStorage.getItem("energy") || "200");
    const maxEnergy = 200;

    let boost = false;

    const coinsEl = document.getElementById("coins");
    const energyEl = document.getElementById("energy");
    const btn = document.getElementById("tap");
    const boostBtn = document.getElementById("boostBtn");

    coinsEl.textContent = coins;
    energyEl.textContent = energy;

    function save() {
      localStorage.setItem("coins", coins);
      localStorage.setItem("energy", energy);
    }

    // TAP FUNCTION
    btn.onclick = (e) => {
      if (energy <= 0) return;

      let amount = boost ? 2 : 1;

      coins += amount;
      energy--;

      coinsEl.textContent = coins;
      energyEl.textContent = energy;

      save();

      // popup effect
      const pop = document.createElement("div");
      pop.className = "popup";
      pop.style.left = e.clientX + "px";
      pop.style.top = e.clientY + "px";
      pop.innerHTML = "+" + amount;
      document.body.appendChild(pop);

      setTimeout(() => pop.remove(), 800);
    };

    // AUTO ENERGY RECHARGE
    setInterval(() => {
      if (energy < maxEnergy) {
        energy++;
        energyEl.textContent = energy;
        save();
      }
    }, 600);

    // BOOST BUTTON
    boostBtn.onclick = () => {
      if (boost) return;

      boost = true;
      boostBtn.style.background = "#00cc44";
      boostBtn.innerHTML = "Boost Active (30s)";

      setTimeout(() => {
        boost = false;
        boostBtn.style.background = "#0099ff";
        boostBtn.innerHTML = "⚡ Boost x2 (30s)";
      }, 30000);
    };

  </script>

</body>
</html>
